<html lang='eng'>

<head>
    <title>ARRAY TEST</title>
    <link rel="stylesheet" type="text/css" href="style.css" media="screen" />
</head>

<body>
  <container id="form">
    <header>
      <h1>Team Maker</h1>
      <p>
        Need to make a team? Who's the team captain? co-captain? Enter three or more names and hit submit to make your dream team!
      </p>

    </header>
    <div id="pre">
      <input type="text" class="theplayer pre" name="Player" id="bind" value="Enter Names" onclick='javascript: this.value = ""'/>
      <input type="button" id="thego" class="pre" value="Go" /><br />
      <ol id="load"></ol>
      <input type="button" id="go" class="pre" value="Press For Team"/><br />
    </div>
    <div id="result">
      <h3 id="captain" class="captain"></h2>
      <h3 id="cocaptain" class="cocaptain"></h2>
      <ul id="teammateys"></ul>
      <!-- <button id="resetform" onclick="reload()">Reset</button> -->
    </div>
  </container>

    <script>

    function myClickFunc() {
      var input = document.getElementById("bind");
      var mapObj = {
        cat:("🐱"),
        dog:("🐶"),
        goat:"goattty",
        bryan:("💩"),
        ethan:("Ethan Gamer Nerd Cleveland"),
        emma:("🐷 Pork Fatty Britches"),
        melissa:("Melissa, Satan's Little Helper ♨️"),
        kate:("Kate, The Hottest Gal On Earth ❤️ ❤️ ❤️"),
        matt:("Matt Jaeh, most awesome boss in the world 💯"),
        justin:("Justin 🍎 Licata"),
        kevin:("OMG Kevin go away, no one asked you 🐴"),
        chris:("/r/onesneakymofo 😆"),
        kyle:("Kyle has pwnd u, 💻"),
        andrew:("Bromera"),
        kelsy:("K-🐶 who is cooler than Porky Britches Fatty Pants Oinker 🐖"),
        kelsey:"K-🐶 who is cooler than Porky Britches Fatty Pants Oinker"
      };
      // input.value = input.value.replace(/cat|dog|goat/gi, function(matched){
      //   return mapObj[matched];
      // });
      input.value = input.value.toLowerCase().replace(/cat|dog|goat|bryan|ethan|emma|melissa|kate|matt|justin|kevin|chris|kyle|andrew|kelsy|kelsey/gi, function(matched){
        return mapObj[matched];
      });

      var currentValue = document.getElementById("bind").value;
      var x = document.createElement("LI");
      var t = document.createTextNode(currentValue);
      x.className = 'player'
      x.appendChild(t);
      document.getElementById("load").appendChild(x);
      document.getElementById('bind').value= "";
    }

    function map(arrayLike, fn) {
      var ret = [],
      i = -1,
      len = arrayLike.length;
      while (++i < len) ret[i] = fn(arrayLike[i]);
      return ret;
    }

    function getText(node) {
      if (node.nodeType === 3) return node.data;
      var txt = '';
      if (node = node.firstChild)
      do {
        txt += getText(node);
      } while (node = node.nextSibling);
      return txt;
    }

    function shuffle(a) {
      for (let i = a.length; i; i--) {
        let j = Math.floor(Math.random() * i);
        [a[i - 1], a[j]] = [a[j], a[i - 1]];
      }
    }

    function reload() {
        location.reload();
    }


      const formreset = document.getElementById('result')
      const el = document.getElementById('bind');
      const gobutton = document.getElementById('thego');
      let nameOfPlayer = el.value;
      var listItems = document.getElementById('teammateys').getElementsByTagName('li');

      gobutton[window.addEventListener ? 'addEventListener' : 'attachEvent']( window.addEventListener ? 'click' : 'onclick', myClickFunc, false);
      var myArray = map(listItems, getText);

      document.getElementById('bind').onkeydown = function(e) {
        if (e.keyCode == 13) {
          myClickFunc();
        }
      };



      document.getElementById("go").addEventListener("click", function() {
          const inputs = document.querySelectorAll(".player")
          let listItems = Array.from(inputs).map(input => input.innerHTML)
          shuffle(listItems);
          const [captain, id, ...teammates] = listItems;
          const elem = document.getElementById("pre");
          elem.className = 'hide';
          // document.body.innerHTML = document.body.innerHTML.replace('Bryan', '💩');
          document.getElementById('captain').innerHTML += (`<h2>${captain} is the captain!</h2>`);
          document.getElementById('cocaptain').innerHTML += (`<h2>${id} is the co-captain!</h2>`);
          teammates.forEach(function(teammates) {
              document.getElementById('teammateys').innerHTML += (`<li>${teammates}</li>`);
          });
          document.getElementById("result").innerHTML += (`<button id="resetform" onclick="reload()">Reset</button>`);
      });

    </script>
  </body>
</html>
